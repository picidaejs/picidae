<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title> Picidae </title>
    <link rel="stylesheet" href="/picidaejs/public/style.css">
</head>
<body>
<div id="root">
    <div data-reactroot="" data-reactid="1" data-react-checksum="2129092827"><nav class="nav" data-reactid="2"><div class="nav-container" data-reactid="3"><a href="/picidaejs/public/" data-reactid="4"><h2 class="nav-title" data-reactid="5">Picidae</h2></a><ul data-reactid="6"><li data-reactid="7"><a href="/picidaejs/public/guide" data-reactid="8">Guide</a></li><li data-reactid="9"><a href="/picidaejs/public/docs/1" data-reactid="10">Document</a></li><li data-reactid="11"><a href="/picidaejs/public/changelog" class="active-header" data-reactid="12">ChangeLog</a></li><li data-reactid="13"><a href="/picidaejs/public/about" data-reactid="14">About Me</a></li></ul></div></nav><main data-reactid="15"><div class="post" data-reactid="16"><div class="post-info" data-reactid="17"><div class="post-info" data-reactid="18"><span data-reactid="19">Written </span><span data-reactid="20">on </span><time datetime="2017-10-08T21:31:28+08:00" data-reactid="21">Oct 8, 2017</time></div></div><h1 class="post-title" data-reactid="22">更新说明</h1><div class="post-line" data-reactid="23"></div><article data-reactid="24"><h2 id="测试版">测试版</h2>
<h3 id="初始版本">初始版本</h3>
<h4 id="功能">功能</h4>
<ol>
<li><code>picidae start</code><br>
开启webpack服务器，根据picidae配置（theme，routesMap，transformer, plugin...）生成前端代码。
根据文档目录，自动生成 docsEntry（支持懒加载）</li>
</ol>
<p>docsEntry: 指的是 <code>url -&gt; absolute filename</code> 的映射</p>
<p>start 就是开发环境，除了加入热更新 (WebpackHotMiddlemare) ，同时检测主题配置文件和文档目录中文件的变动。
自动同步更新前端代码。</p>
<p>其中：文档（markdown）内容包括 meta/content，如下 文本开头的<code>--- * ---</code> 中的为meta文本（yaml格式），
之后的为 markdown 内容本身，即content</p>
<pre><code class="hljs language-markdown">---
title: im title of meta
<span class="hljs-section">datetime: 2017-09-09 10:22
---</span>

im content</code></pre>
<ol start="2">
<li><code>build</code><br>
首先同样需要同 <code>start</code> 一样，生成前端代码，执行 webpack build。
之后再一次执行 webpack build, <code>target: node</code>, 用来生成node环境下执行的代码（逻辑为生成routes）
之后在node环境执行第二次webpack打包的代码，得到routes。
最后就是根据docsEntry和主题配置中的routes得到初版的routes，结合Server Side Render 依次得到每个路由的HTML，并写入文件。
（还有spider的概念，根据生成的html，得到新的path，进而产生新的html）</li>
</ol>
<h4 id="特性">特性</h4>
<ul>
<li>Transfomers：<br>
transformer 分为两类：NodeTransformer / BrowserTransformer
其中 NodeTransformer 分为 MarkdownTransformer 和 HTMLTransformer，分别对 markdown/html 文本进行自定义的转换，得到新的 data（执行环境在node）<br>
BrowserTransformer 则为在浏览器环境下执行的转换，其中在浏览器中的 data 为 html 本身。</li>
</ul>
<ol>
<li>
<p>react-render<br>
使用 HTMLTransformer 和 BrowserTransformer 实现。<br>
用法：在markdown文本中，书写如下，就可以在markdown下面自动生成该组件的View</p>
<pre><code class="hljs language-markdown"><span class="hljs-code">```render-jsx
export default () =&gt; &lt;h1&gt;im H1&lt;/h1&gt;
```</span></code></pre>
</li>
<li>
<p>file-syntax<br>
使用 MarkdownTransformer 实现。<br>
用法1：在markdown文本中，书写如下，可以直接得到其中的文本的内容。其中路径只能是相对于本文件路径。
(不支持自己读取本身内容，会循环嵌套)</p>
<pre><code class="hljs language-markdown">@./path/to/file@</code></pre>
<p>用法2：在markdown文本中，书写如下，可以直接页面生成一个跳转到该文件的link。（根据docsEntry实现）</p>
<pre><code class="hljs language-markdown">@link::[title]./path/to/file@
@link::./path/to/file@</code></pre>
<p>在meta中书写</p>
<pre><code class="hljs language-yaml"><span class="hljs-meta">---</span>
<span class="hljs-comment"># both： 功能全部关闭</span>
<span class="hljs-comment"># link： link 功能关闭</span>
<span class="hljs-comment"># file-content： file-content 功能关闭</span>
<span class="hljs-attr">disable-file-syntax:</span> <span class="hljs-string">both</span>
<span class="hljs-meta">---</span></code></pre>
</li>
</ol>
<ul>
<li>
<p>Plugins:<br>
plugin执行在浏览器端，适合于主题开发者，默认注入了 utils plugin</p>
</li>
<li>
<p>Commanders：<br>
支持扩展命令行</p>
</li>
<li>
<p>Theme：
自定义开发主题</p>
</li>
</ul>
</article><div class="pagination" data-reactid="25"><a href="#" class="top" data-reactid="26">Top</a></div></div></main><footer data-reactid="27"><span data-reactid="28"><!-- react-text: 29 -->© <!-- /react-text --><time data-reactid="30">2017</time><!-- react-text: 31 -->. Powered By <!-- /react-text --><a href="https://github.com/picidaejs/picidae" data-reactid="32">Picidae</a><!-- react-text: 33 --> .<!-- /react-text --></span></footer></div>
</div>
<script src="/picidaejs/public/common.js"></script>
<script src="/picidaejs/public/app.js"></script>
</body>
</html>